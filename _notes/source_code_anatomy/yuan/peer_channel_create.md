# cli
- `peer channel create -o orderer.example.com:7050 -c mychannel -f ./channel-artifacts/channel.tx --tls true --cafile $ORDERER_CA`

    ```go
    // package main
    mainCmd.AddCommand(channel.Cmd(nil))
    
    /* package channel */

    func Cmd(cf *ChannelCmdFactory) *cobra.Command {
        AddFlags(channelCmd)
        channelCmd.AddCommand(createCmd(cf))
        return channelCmd
    }

    // AddOrdererFlags adds flags for orderer-related commands
    func AddOrdererFlags(cmd *cobra.Command) {
        flags := cmd.PersistentFlags()

        flags.StringVarP(&OrderingEndpoint, "orderer", "o", "", "Ordering service endpoint")
        flags.BoolVarP(&tlsEnabled, "tls", "", false, "Use TLS when communicating with the orderer endpoint")
        flags.StringVarP(&caFile, "cafile", "", "",
            "Path to file containing PEM-encoded trusted certificate(s) for the ordering endpoint")

        flags.BoolVarP(&clientAuth, "clientauth", "", false,
            "Use mutual TLS when communicating with the orderer endpoint")
        flags.StringVarP(&keyFile, "keyfile", "", "",
            "Path to file containing PEM-encoded private key to use for mutual TLS "+
                "communication with the orderer endpoint")
        flags.StringVarP(&certFile, "certfile", "", "",
            "Path to file containing PEM-encoded X509 public key to use for "+
                "mutual TLS communication with the orderer endpoint")
        flags.StringVarP(&ordererTLSHostnameOverride, "ordererTLSHostnameOverride",
            "", "", "The hostname override to use when validating the TLS connection to the orderer.")
        flags.DurationVarP(&connTimeout, "connTimeout",
            "", 3*time.Second, "Timeout for client to connect")
    }

    func init() {
        resetFlags()
    }
    func resetFlags() {
        // ...
        // StringVar defines a string flag with specified name, default value, and usage string.
        // StringVarP is like StringVar, but accepts a shorthand letter that can be used after a single dash.
        flags.StringVarP(&channelID, "channelID", "c", common.UndefinedParamValue, "In case of a newChain command, the channel ID to create. It must be all lower case, less than 250 characters long and match the regular expression: [a-z][a-z0-9.-]*")
        flags.StringVarP(&channelTxFile, "file", "f", "", "Configuration transaction file generated by a tool such as configtxgen for submitting to orderer")

        flags.StringVarP(&genesisBlockPath, "blockpath", "b", common.UndefinedParamValue, "Path to file containing genesis block")
        flags.StringVarP(&outputBlock, "outputBlock", "", common.UndefinedParamValue, `The path to write the genesis block for the channel. (default ./<channelID>.block)`)
        flags.DurationVarP(&timeout, "timeout", "t", 10*time.Second, "Channel creation timeout")
    }

    
    func createCmd(cf *ChannelCmdFactory) *cobra.Command {
        createCmd := &cobra.Command{
            Use:   "create",
            Short: "Create a channel",
            Long:  "Create a channel and write the genesis block to a file.",
            RunE: func(cmd *cobra.Command, args []string) error {
                return create(cmd, args, cf)
            },
        }
        flagList := []string{
            "channelID",
            "file",
            "outputBlock",
            "timeout",
        }
        attachFlags(createCmd, flagList)
        return createCmd
    }
    // 将已经定义好的 flag 加到 peer channel create 命令
    func attachFlags(cmd *cobra.Command, names []string) {
        cmdFlags := cmd.Flags()
        for _, name := range names {
            // Lookup returns the Flag structure of the named flag, returning nil if none exists.
            if flag := flags.Lookup(name); flag != nil {
                cmdFlags.AddFlag(flag)
            } else {
                logger.Fatalf("Could not find flag '%s' to attach to commond '%s'", name, cmd.Name())
            }
        }
    }

    func create(cmd *cobra.Command, args []string, cf *ChannelCmdFactory) error {
        // ...
        if cf == nil {
            cf, err = InitCmdFactory(EndorserNotRequired, PeerDeliverNotRequired, OrdererRequired)
            if err != nil {
                return err
            }
        }
        return executeCreate(cf)
    }
    ```